# ~/.bashrc

Add the following...

  export APP_DIR='$HOME/www/alice-rails-5'

These aliases...

  alias current='cd ~/www/alice/current'
  alias shared='cd ~/www/alice/shared'

Become these aliases...

  alias current='cd ~/www/alice-rails-5/current'
  alias shared='cd ~/www/alice-rails-5/shared'


# Node.js

  curl -sL https://deb.nodesource.com/setup_10.x | sudo -E bash -
  sudo apt-get install -y nodejs


# YARN

  echo "deb https://dl.yarnpkg.com/debian/ stable main" | sudo tee /etc/apt/sources.list.d/yarn.list
  sudo apt-get update && sudo apt-get install yarn


# Nginx

sudo service nginx stop

Setup passenger....

  sudo apt-get purge nginx-extras passenger
  sudo apt-get install -y nginx-extras passenger

  cd /etc/nginx
  sudo cp passenger.conf passenger.conf.alice-rails-5
  sudo mv passenger.conf passenger.conf.alice-rails-4
  sudo vi passenger.conf.alice-rails-5
  # /home/alice/.rvm/wrappers/ruby-2.2.2/ruby;
  # /home/alice/.rvm/wrappers/ruby-2.5.1/ruby;
  sudo ln -s passenger.conf.alice-rails-5 passenger.conf

Setup available sites

  cd sites-enabled
  sudo mv default alice-rails-4
  sudo cp alice-rails-4 alice-rails-5
  sudo vi alice-rails-5
  # /home/alice/www/alice/current/public;
  # /home/alice/www/alice-rails-5/current/public;

Setup enable Rails site

  sudo cd /etc/nginx/sites-enabled
  sudo rm default
  sudo ln -s ../sites-available/alice-rails-5 alice-rails-5

# master.key

  # on target as alice
  mkdir -p /home/alice/www/alice-rails-5/releases
  mkdir -p /home/alice/www/alice-rails-5/shared
  mkdir -p /home/alice/www/alice-rails-5/repo
  mkdir -p /home/alice/www/alice-rails-5/shared/config

  # on local as user
  scp config/master.key alice@stg:/home/alice/www/alice-rails-5/shared/config

