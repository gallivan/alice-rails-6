module Builders

  class FutureBuilder

    # TRC00920151030FCA  FUT20151030034333YTRAD000000518100000011000000000071ICECLRFUIFLLL      20151216 00000000.000000S                            0000019001725132800001TRADE  O                   0000000000.00 0000000001.00 0000000001.00 0000000000.00 0000000006.0020151103                CLAIM     162412      TRADA00000099.400000020151102                                    GBP 000000000000.0000000000000000000000000        IFLL0000000000000000.00 0000000000000000.00       EJO       EJO S          0000000000000000.00 0000000000000000.28GBPD0000000000000000.00      0000000000000  0000000030343330000000000000000.01DAEUR   FORTISUS  MASTER                                                                                              15103017242811568906405121STD030000000000N 9770833                                                     000977083322997286400000000000000000.00    0000000000000000.00     0000000.00000000000.0000AIFLLIR    L    00000000            IFLLIFLLGBNEJOMARGNEJO        S              000000000000000000000.000000000 000000000000000000001.000000000 000000000000000000001.000000000 000000000000000000000.000000000 000000000000000000006.000000000101000018000000000000000000000000000361QBC          2015-10-30-16.24.12.0000002015-10-30-16.24.12.0000000001-01-01-00.00.00.0000000001-01-01-00.00.00.0000002015-10-30-16.24.28.115784YEMK                           E0071                                                                                     CLAIM                         JCAR                          E0071                         FCA-FU-20151030-003034333                         FCA-FU-15103017242811568906405121                 E0071
    # TRC00920151030FCA  FUT20151030234232YTRAD000000518100000011000000004120MATIF FUMAT EBM    20151210 00000000.000000BE4120                       0000000010011033210001TRADE  O                   0000000000.00-0000000001.00 0000000001.00 0000000000.00 0000000000.0000000000                1001102431172958E4120 TRADA00000180.750000020151102                                    EUR 000000000000.0000000000000000000000000        MAT 0000000000000000.00 0000000000000000.00       EML       4197PAM001     0000000000000000.00 0000000000000000.95EURD0000000000000000.00      0000000000000  0000000032342320000000000000000.01DAEUR   FORTISUS  MASTER                                                                                              15103018301113068906656054STD010000000000N                                                             0000445980  629362070000000000000000.00    0000000000000000.00     0000000.00000000000.0000AXMATCO    EBM  00000000            MAT XMATFRNEJOMARGN4197PAM0   1              000000000000000000000.000000000-000000000000000000001.000000000 000000000000000000001.000000000 000000000000000000000.000000000 000000000000000000000.000000000000LCHC000201510301001102431                        2015-10-30-17.29.58.0000002015-10-30-17.29.58.0000000001-01-01-00.00.00.0000000001-01-01-00.00.00.0000002015-10-30-17.30.11.130187N                              E4120                                                                                                                   CSUM                          4197PAM001                    FCA-FU-20151030-003234232                         FCA-FU-15103018301113068906656054
    # TRC00920151030FCA  FUT20151030273667YTRAD000000518100000011000000000019ICECLRFUIFLLL      20160615 00000000.000000B                            0000019001725873800001TRADE  O                   0000000001.00 0000000000.00 0000000001.00 0000000001.00 0000000000.0020151103                CLAIM     175638      TRADA00000099.250000020151102                                    GBP 000000000000.0000000000000000000000000        IFLL0000000000000000.00 0000000000000000.00       EJO       EJO S          0000000000000000.00 0000000000000000.28GBPD0000000000000000.00      0000000000000  0000000032736670000000000000000.01DAEUR   FORTISUS  MASTER                                                                                              15103018565237668906990817STD030000000000N 9772779                                                     000977277922997286390000000000000000.00    0000000000000000.00     0000000.00000000000.0000AIFLLIR    L    00000000            IFLLIFLLGBNEJOMARGNEJO        S              000000000000000000001.000000000 000000000000000000000.000000000 000000000000000000001.000000000 000000000000000000001.000000000 000000000000000000000.000000000101000018000000000000000000000000000363WH1          2015-10-30-17.56.38.0000002015-10-30-17.56.38.0000000001-01-01-00.00.00.0000000001-01-01-00.00.00.0000002015-10-30-17.56.52.377058YEMK                           E0019                                                                                     CLAIM                         MKZO                          E0019                         FCA-FU-20151030-003273667                         FCA-FU-15103018565237668906990817                 E0019

    # TRC00920151030FCA FUT20151030296142YTRAD000000518100000011000000000624EUREX FUEURXFGBS 20151208 00000000.000000 SE0624 0000011000077935900001 TRADE O -0000000002.00 0000000000.00 0000000002.00 0000000000.00 0000000000.0020151103 190245 ULPUECTRADA00000111 .495000020151102 EUR 000000000000.0000000000000000000000000 EURX0000000000000000 .00 0000000000000000.00 EMMCH EMMCH P1 0000000000000000.00 0000000000000000.00 EURD0000000000000000 .00 0000000000000 0000000032961420000000000000000.02 DAEUR FORTISUS MASTER 15103019025686068906486157 STD030000000000N 000000000003 IGFAFNR 0000000000000000.00 0000000000000000.00 0000000.00000000000 .0000 AXEURBO FGBS 00000000 DE0009652669EURXXEURDENEJOMARGNEMMCH 1 -000000000000000000002.000000000 000000000000000000000.000000000 000000000000000000002.000000000 000000000000000000000.000000000 000000000000000000000.000000000000 ECAG000E20151030FGBS00GPCV 0000003 IGFAFNRSC 2015-10-30-19.02 .45 .0000002015-10-30-19.02 .45 .0000002015-10-30-19.02 .45 .0000002015-10-30-19.02 .56 .0000002015-10-30-18.02 .56 .860360 N E0624 E0624 E0624 E0624 TASCEURX2015-10-30 FGBS00GPCV0000003IGFAFNR TASCEURX2015-10-30 FGBS00GPCV0000003IGFAFNR|1 ULPUEC

    def self.build(params, code)
      #
      # TODO find a way to keep attr 'code' out of Future
      #
      future = Future.find_by_code(code)
      if future.blank?
        Future.create! do |f|
          f.expires_on = Date.parse(params['9037'])
          f.code = code
        end
      else
        future
      end
    end

    def self.build_cme_eod(params, code)
      future = Future.find_by_code(code)
      if future.blank?
        Future.create! do |f|
          f.expires_on = Date.parse(params['FIXML']['TrdCaptRpt']['Instrmt']['MatDt'])
          f.code = code
        end
      else
        future
      end
    end

    def self.build_aacc_eod_csv(params, code)
      future = Future.find_by_code(code)
      if future.blank?
        Future.create! do |f|
          f.expires_on = Date.parse(params[:ary][16])
          f.code = code
        end
      else
        future
      end
    end

    def self.build_ghf_eod_csv(params, code)
      future = Future.find_by_code(code)
      if future.blank?
        Future.create! do |f|
          f.expires_on = Date.parse(params[:ary][23])
          f.code = code
        end
      else
        future
      end
    end

  end

end
